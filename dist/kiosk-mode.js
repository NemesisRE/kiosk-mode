!function(){"use strict";var t=function(){return t=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},t.apply(this,arguments)};function e(t,e,n,o){return new(n||(n=Promise))((function(i,r){function _(t){try{s(o.next(t))}catch(t){r(t)}}function a(t){try{s(o.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(_,a)}s((o=o.apply(t,e||[])).next())}))}function n(t,e){var n,o,i,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},_=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return _.next=a(0),_.throw=a(1),_.return=a(2),"function"==typeof Symbol&&(_[Symbol.iterator]=function(){return this}),_;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;_&&(_=0,a[0]&&(r=0)),r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=r.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(t){a=[6,t],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}"function"==typeof SuppressedError&&SuppressedError;var o=function(t,e,n){var o;void 0===n&&(n={});var i=n.retries,r=void 0===i?10:i,_=n.delay,a=void 0===_?10:_,s=n.shouldReject,c=void 0===s||s,I=null!==(o=n.rejectMessage)&&void 0!==o?o:"Could not get the result after {{ retries }} retries";return new Promise((function(n,o){var i=0,_=function(){var s=t();e(s)?n(s):++i<r?setTimeout(_,a):c?o(new Error(I.replace(/\{\{\s*retries\s*\}\}/g,"".concat(r)))):n(s)};_()}))},i=function(){return i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)};function r(t,e,n,o){return new(n||(n=Promise))((function(e,i){function r(t){try{a(o.next(t))}catch(t){i(t)}}function _(t){try{a(o.throw(t))}catch(t){i(t)}}function a(t){var o;t.done?e(t.value):(o=t.value,o instanceof n?o:new n((function(t){t(o)}))).then(r,_)}a((o=o.apply(t,[])).next())}))}function _(t,e){var n,o,i,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},_=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return _.next=a(0),_.throw=a(1),_.return=a(2),"function"==typeof Symbol&&(_[Symbol.iterator]=function(){return this}),_;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;_&&(_=0,a[0]&&(r=0)),r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(t){a=[6,t],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}"function"==typeof SuppressedError&&SuppressedError;var a="$",s=":host",c="invalid selector",I=10,E=10,O=function(t){var e,n=t[0],o=t[1];return(e=n)&&(e instanceof Document||e instanceof Element||e instanceof ShadowRoot)&&"string"==typeof o};function A(t,e){return function(t){return t.split(",").map((function(t){return t.trim()}))}(t).map((function(t){var n=function(t){return t.split(a).map((function(t){return t.trim()}))}(t);return e(n)}))}function l(t,e){var n=e?" If you want to select a shadowRoot, use ".concat(e," instead."):"";return"".concat(t," cannot be used with a selector ending in a shadowRoot (").concat(a,").").concat(n)}function u(t){return t instanceof Promise?t:Promise.resolve(t)}function h(){return"You can not select a shadowRoot (".concat(a,") of the document.")}function T(){return"You can not select a shadowRoot (".concat(a,") of a shadowRoot.")}function D(t,e){for(var n,o,i=null,r=t.length,_=0;_<r;_++){if(0===_)if(t[_].length)i=e.querySelector(t[_]);else{if(e instanceof Document)throw new SyntaxError(h());if(e instanceof ShadowRoot)throw new SyntaxError(T());i=(null===(n=e.shadowRoot)||void 0===n?void 0:n.querySelector(t[++_]))||null}else i=(null===(o=i.shadowRoot)||void 0===o?void 0:o.querySelector("".concat(s," ").concat(t[_])))||null;if(null===i)return null}return i}function L(t,e){var n,o=function(t,e){for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return[].concat(n||Array.prototype.slice.call(e))}(0,t),i=o.pop();if(!o.length)return e.querySelectorAll(i);var r=D(o,e);return(null===(n=null==r?void 0:r.shadowRoot)||void 0===n?void 0:n.querySelectorAll("".concat(s," ").concat(i)))||null}function d(t,e){if(1===t.length&&!t[0].length){if(e instanceof Document)throw new SyntaxError(h());if(e instanceof ShadowRoot)throw new SyntaxError(T());return e.shadowRoot}var n=D(t,e);return(null==n?void 0:n.shadowRoot)||null}function S(t,e,n,i){return r(this,0,void 0,(function(){return _(this,(function(r){return[2,o((function(){return function(t,e,n,o){for(var i=A(t,(function(t){if(!t[t.length-1].length)throw new SyntaxError(l(n,o));return t})),r=i.length,_=0;_<r;_++){var a=D(i[_],e);if(a)return a}return null}(t,e,"asyncQuerySelector","asyncShadowRootQuerySelector")}),(function(t){return!!t}),{retries:n,delay:i,shouldReject:!1})]}))}))}function H(t,e,n,i){return r(this,0,void 0,(function(){return _(this,(function(r){return[2,o((function(){return function(t,e,n){for(var o=A(t,(function(t){if(!t[t.length-1].length)throw new SyntaxError(l(n));return t})),i=o.length,r=0;r<i;r++){var _=L(o[r],e);if(null==_?void 0:_.length)return _}return document.querySelectorAll(c)}(t,e,"asyncQuerySelectorAll")}),(function(t){return!!t.length}),{retries:n,delay:i,shouldReject:!1})]}))}))}function R(t,e,n,i){return r(this,0,void 0,(function(){return _(this,(function(r){return[2,o((function(){return function(t,e,n,o){for(var i=A(t,(function(t){if(t.pop().length)throw new SyntaxError(function(t,e){return"".concat(t," must be used with a selector ending in a shadowRoot (").concat(a,"). If you don't want to select a shadowRoot, use ").concat(e," instead.")}(n,o));return t})),r=i.length,_=0;_<r;_++){var s=d(i[_],e);if(s)return s}return null}(t,e,"asyncShadowRootQuerySelector","asyncQuerySelector")}),(function(t){return!!t}),{retries:n,delay:i,shouldReject:!1})]}))}))}var N=function(t,e){var n=t.querySelectorAll(e);if(n.length)return n;if(t instanceof Element&&t.shadowRoot){var o=N(t.shadowRoot,e);if(o.length)return o}for(var i=0,r=Array.from(t.querySelectorAll("*"));i<r.length;i++){var _=r[i],a=N(_,e);if(a.length)return a}return document.querySelectorAll(c)},f=function(t,e,n,i){return o((function(){return N(t,e)}),(function(t){return!!t.length}),{retries:n,delay:i,shouldReject:!1})};function p(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(this,0,void 0,(function(){var e,n,o,i,r;return _(this,(function(_){switch(_.label){case 0:return O(t)?(e=t[0],n=t[1],o=t[2],[4,S(n,e,(null==o?void 0:o.retries)||I,(null==o?void 0:o.delay)||E)]):[3,2];case 1:case 3:return[2,_.sent()];case 2:return i=t[0],r=t[1],[4,S(i,document,(null==r?void 0:r.retries)||I,(null==r?void 0:r.delay)||E)]}}))}))}function G(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(this,0,void 0,(function(){var e,n,o,i,r;return _(this,(function(_){switch(_.label){case 0:return O(t)?(e=t[0],n=t[1],o=t[2],[4,H(n,e,(null==o?void 0:o.retries)||I,(null==o?void 0:o.delay)||E)]):[3,2];case 1:return[2,_.sent()];case 2:return i=t[0],r=t[1],[2,H(i,document,(null==r?void 0:r.retries)||I,(null==r?void 0:r.delay)||E)]}}))}))}function v(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(this,0,void 0,(function(){var e,n,o,i,r;return _(this,(function(_){switch(_.label){case 0:return O(t)?(e=t[0],n=t[1],o=t[2],[4,R(n,e,(null==o?void 0:o.retries)||I,(null==o?void 0:o.delay)||E)]):[3,2];case 1:return[2,_.sent()];case 2:return i=t[0],r=t[1],[2,R(i,document,(null==r?void 0:r.retries)||I,(null==r?void 0:r.delay)||E)]}}))}))}var C=function(){function t(t,e){t instanceof Node||t instanceof Promise?(this._element=t,this._asyncParams=i({retries:I,delay:E},e||{})):(this._element=document,this._asyncParams=i({retries:I,delay:E},t||{}))}return Object.defineProperty(t.prototype,"element",{get:function(){return u(this._element).then((function(t){return t instanceof NodeList?t[0]||null:t}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){var e=this;return new t(u(this._element).then((function(t){return t instanceof Document||t instanceof ShadowRoot||null===t||t instanceof NodeList&&0===t.length?null:t instanceof NodeList?v(t[0],a,e._asyncParams):v(t,a,e._asyncParams)})),this._asyncParams)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"all",{get:function(){return u(this._element).then((function(t){return t instanceof NodeList?t:document.querySelectorAll(c)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"asyncParams",{get:function(){return this._asyncParams},enumerable:!1,configurable:!0}),t.prototype.eq=function(t){return r(this,0,void 0,(function(){return _(this,(function(e){return[2,u(this._element).then((function(e){return e instanceof NodeList&&e[t]||null}))]}))}))},t.prototype.query=function(e){var n=this;return new t(u(this._element).then((function(t){return null===t||t instanceof NodeList&&0===t.length?null:t instanceof NodeList?G(t[0],e,n._asyncParams):G(t,e,n._asyncParams)})),this._asyncParams)},t.prototype.deepQuery=function(e){var n=this;return new t(u(this._element).then((function(t){return null===t||t instanceof NodeList&&0===t.length?null:t instanceof NodeList?Promise.race(Array.from(t).map((function(t){return f(t,e,n._asyncParams.retries,n._asyncParams.delay)}))):f(t,e,n._asyncParams.retries,n._asyncParams.delay)})),this._asyncParams)},t}(),m=function(t,e){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},m(t,e)},y=function(){return y=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},y.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var M,g,w,U,b,B,P,F,x,V,k,W,K,j,Y,q,$="$",z={retries:100,delay:50,eventThreshold:450};!function(t){t.HOME_ASSISTANT="HOME_ASSISTANT",t.HOME_ASSISTANT_MAIN="HOME_ASSISTANT_MAIN",t.HA_DRAWER="HA_DRAWER",t.HA_SIDEBAR="HA_SIDEBAR",t.PARTIAL_PANEL_RESOLVER="PARTIAL_PANEL_RESOLVER"}(M||(M={})),function(t){t.HA_PANEL_LOVELACE="HA_PANEL_LOVELACE",t.HUI_ROOT="HUI_ROOT",t.HEADER="HEADER",t.HUI_VIEW="HUI_VIEW"}(g||(g={})),function(t){t.HA_MORE_INFO_DIALOG="HA_MORE_INFO_DIALOG",t.HA_DIALOG="HA_DIALOG",t.HA_DIALOG_CONTENT="HA_DIALOG_CONTENT",t.HA_MORE_INFO_DIALOG_INFO="HA_MORE_INFO_DIALOG_INFO",t.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK="HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK",t.HA_DIALOG_MORE_INFO_SETTINGS="HA_DIALOG_MORE_INFO_SETTINGS"}(w||(w={})),function(t){t.ON_LISTEN="onListen",t.ON_PANEL_LOAD="onPanelLoad",t.ON_LOVELACE_PANEL_LOAD="onLovelacePanelLoad",t.ON_MORE_INFO_DIALOG_OPEN="onMoreInfoDialogOpen",t.ON_HISTORY_AND_LOGBOOK_DIALOG_OPEN="onHistoryAndLogBookDialogOpen",t.ON_SETTINGS_DIALOG_OPEN="onSettingsDialogOpen"}(U||(U={})),function(t){t.HOME_ASSISTANT="home-assistant",t.HOME_ASSISTANT_MAIN="home-assistant-main",t.HA_DRAWER="ha-drawer",t.HA_SIDEBAR="ha-sidebar",t.PARTIAL_PANEL_RESOLVER="partial-panel-resolver",t.HA_PANEL_LOVELACE="ha-panel-lovelace",t.HUI_ROOT="hui-root",t.HEADER=".header",t.HUI_VIEW="hui-view",t.HA_MORE_INFO_DIALOG="ha-more-info-dialog",t.HA_DIALOG="ha-dialog",t.HA_DIALOG_CONTENT=".content",t.HA_MORE_INFO_DIALOG_INFO="ha-more-info-info",t.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK="ha-more-info-history-and-logbook",t.HA_DIALOG_MORE_INFO_SETTINGS="ha-more-info-settings"}(q||(q={}));var Q,X,Z,J,tt=((b={})[M.HOME_ASSISTANT]={selector:q.HOME_ASSISTANT,children:{shadowRoot:{selector:$,children:(B={},B[M.HOME_ASSISTANT_MAIN]={selector:q.HOME_ASSISTANT_MAIN,children:{shadowRoot:{selector:$,children:(P={},P[M.HA_DRAWER]={selector:q.HA_DRAWER,children:(F={},F[M.HA_SIDEBAR]={selector:q.HA_SIDEBAR,children:{shadowRoot:{selector:$}}},F[M.PARTIAL_PANEL_RESOLVER]={selector:q.PARTIAL_PANEL_RESOLVER},F)},P)}}},B)}}},b),et=((x={})[g.HA_PANEL_LOVELACE]={selector:q.HA_PANEL_LOVELACE,children:{shadowRoot:{selector:$,children:(V={},V[g.HUI_ROOT]={selector:q.HUI_ROOT,children:{shadowRoot:{selector:$,children:(k={},k[g.HEADER]={selector:q.HEADER},k[g.HUI_VIEW]={selector:q.HUI_VIEW},k)}}},V)}}},x),nt={shadowRoot:{selector:$,children:(W={},W[w.HA_MORE_INFO_DIALOG]={selector:q.HA_MORE_INFO_DIALOG,children:{shadowRoot:{selector:$,children:(K={},K[w.HA_DIALOG]={selector:q.HA_DIALOG,children:(j={},j[w.HA_DIALOG_CONTENT]={selector:q.HA_DIALOG_CONTENT,children:(Y={},Y[w.HA_MORE_INFO_DIALOG_INFO]={selector:q.HA_MORE_INFO_DIALOG_INFO},Y[w.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]={selector:q.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK},Y[w.HA_DIALOG_MORE_INFO_SETTINGS]={selector:q.HA_DIALOG_MORE_INFO_SETTINGS},Y)},j)},K)}}},W)}},ot=function(t,e,n,o){return void 0===n&&(n=null),void 0===o&&(o=!1),Object.entries(e||{}).reduce((function(e,i){var r=i[0],_=i[1];if(_.selector===$&&n)return _.children?y(y({},e),ot(t,_.children,n,!0)):e;var a=n?n.then((function(e){return e?p(e,(n=_.selector,o?"$ "+n:n),t):null;var n})):p(_.selector,t);return e[r]={element:a,children:ot(t,_.children,a),selector:new C(a,t)},e}),{})},it=function(t,e){for(var n=0,o=Object.entries(e);n<o.length;n++){var i=o[n];if(i[0]===t)return i[1];var r=it(t,i[1].children);if(r)return r}},rt=function(t,e){return Object.keys(t).reduce((function(t,n){var o=it(n,e);o.children;var i=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n}(o,["children"]);return t[n]=y({},i),t}),{})},_t=function(){function t(){this.delegate=document.createDocumentFragment()}return t.prototype.addEventListener=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=this.delegate).addEventListener.apply(t,e)},t.prototype.dispatchEvent=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.delegate).dispatchEvent.apply(t,e)},t.prototype.removeEventListener=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.delegate).removeEventListener.apply(t,e)},t}(),at=function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;return n._config=y(y({},z),e),n._timestaps={},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._dispatchEvent=function(t,e){var n=Date.now();n-this._timestaps[t]<this._config.eventThreshold||(this._timestaps[t]=n,this.dispatchEvent(new CustomEvent(t,{detail:e})))},e.prototype._updateDialogElements=function(t){var e,n=this;void 0===t&&(t=w.HA_MORE_INFO_DIALOG_INFO),this._dialogTree=ot(this._config,nt,this._haRootElements.HOME_ASSISTANT.element);var o=rt(w,this._dialogTree);o.HA_DIALOG_CONTENT.element.then((function(t){n._dialogsContentObserver.disconnect(),n._dialogsContentObserver.observe(t,{childList:!0})})),this._haDialogElements=function(t,e){return[w.HA_MORE_INFO_DIALOG,w.HA_DIALOG,w.HA_DIALOG_CONTENT,e].reduce((function(e,n){return e[n]=t[n],e}),{})}(o,t);var i=((e={})[w.HA_MORE_INFO_DIALOG_INFO]=U.ON_MORE_INFO_DIALOG_OPEN,e[w.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]=U.ON_HISTORY_AND_LOGBOOK_DIALOG_OPEN,e[w.HA_DIALOG_MORE_INFO_SETTINGS]=U.ON_SETTINGS_DIALOG_OPEN,e);this._dispatchEvent(i[t],this._haDialogElements)},e.prototype._updateRootElements=function(){var t=this;this._homeAssistantRootTree=ot(this._config,tt),this._haRootElements=rt(M,this._homeAssistantRootTree),this._haRootElements[M.HOME_ASSISTANT].selector.$.element.then((function(e){t._dialogsObserver.disconnect(),t._dialogsObserver.observe(e,{childList:!0})})),this._haRootElements[M.PARTIAL_PANEL_RESOLVER].element.then((function(e){t._panelResolverObserver.disconnect(),e&&t._panelResolverObserver.observe(e,{subtree:!0,childList:!0})})),this._dispatchEvent(U.ON_LISTEN,this._haRootElements),this._dispatchEvent(U.ON_PANEL_LOAD,this._haRootElements)},e.prototype._updateLovelaceElements=function(){var t=this;this._homeAssistantResolverTree=ot(this._config,et,this._haRootElements[M.HA_DRAWER].element),this._haResolverElements=rt(g,this._homeAssistantResolverTree),this._haResolverElements[g.HA_PANEL_LOVELACE].element.then((function(e){t._lovelaceObserver.disconnect(),e&&(t._lovelaceObserver.observe(e.shadowRoot,{childList:!0}),t._dispatchEvent(U.ON_LOVELACE_PANEL_LOAD,y(y({},t._haRootElements),t._haResolverElements)))}))},e.prototype._watchDialogs=function(t){var e=this;t.forEach((function(t){t.addedNodes.forEach((function(t){t.localName===q.HA_MORE_INFO_DIALOG&&e._updateDialogElements()}))}))},e.prototype._watchDialogsContent=function(t){var e=this;t.forEach((function(t){t.addedNodes.forEach((function(t){var n,o=((n={})[q.HA_MORE_INFO_DIALOG_INFO]=w.HA_MORE_INFO_DIALOG_INFO,n[q.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]=w.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK,n[q.HA_DIALOG_MORE_INFO_SETTINGS]=w.HA_DIALOG_MORE_INFO_SETTINGS,n);if(t.localName&&t.localName in o){var i=t.localName;e._updateDialogElements(o[i])}}))}))},e.prototype._watchDashboards=function(t){var e=this;t.forEach((function(t){t.addedNodes.forEach((function(t){e._dispatchEvent(U.ON_PANEL_LOAD,e._haRootElements),t.localName===q.HA_PANEL_LOVELACE&&e._updateLovelaceElements()}))}))},e.prototype._watchLovelace=function(t){var e=this;t.forEach((function(t){t.addedNodes.forEach((function(t){t.localName===q.HUI_ROOT&&e._updateLovelaceElements()}))}))},e.prototype.listen=function(){this._watchDialogsBinded=this._watchDialogs.bind(this),this._watchDialogsContentBinded=this._watchDialogsContent.bind(this),this._watchDashboardsBinded=this._watchDashboards.bind(this),this._watchLovelaceBinded=this._watchLovelace.bind(this),this._dialogsObserver=new MutationObserver(this._watchDialogsBinded),this._dialogsContentObserver=new MutationObserver(this._watchDialogsContentBinded),this._panelResolverObserver=new MutationObserver(this._watchDashboardsBinded),this._lovelaceObserver=new MutationObserver(this._watchLovelaceBinded),this._updateRootElements(),this._updateLovelaceElements()},e.prototype.addEventListener=function(e,n,o){t.prototype.addEventListener.call(this,e,n,o)},e}(_t),st=/([A-Z])([a-z0-9_-]+)/g,ct=function(t){return Object.entries(t).map((function(t){var e=t[0],n=t[1];return"".concat(function(t){return t.replace(st,(function(t,e,n,o){var i=e.toLocaleLowerCase();return o?"-".concat(i).concat(n):"--".concat(i).concat(n)}))}(e),":").concat(n)})).join(";")+";"},It=function(t){return(Array.isArray(t)?t:[t]).map((function(t){return"string"==typeof t?t:Object.entries(t).map((function(t){var e=t[0],n=t[1];return!1===n?"".concat(e,"{display: none !important}"):"".concat(e,"{").concat(ct(n),"}")})).join("")})).join("")},Et=function(t,e){return"".concat(e,"_").concat(t)},Ot=function(t){return t instanceof ShadowRoot?t.host.localName:t.localName},At=function(t,e){var n=Et(Ot(t),e);return t.querySelector("#".concat(n))},lt=function(){function t(t){var e,n,o;void 0===t&&(t={}),this._prefix=null!==(e=t.prefix)&&void 0!==e?e:"ha-styles-manager",this._namespace=null!==(n=t.namespace)&&void 0!==n?n:"home-assistant-styles-manager",this._throwWarnings=null===(o=t.throwWarnings)||void 0===o||o}return t.prototype.getStyleElement=function(t){return At(t,this._prefix)},t.prototype.addStyle=function(t,e){!function(t,e,n,o,i){if(e){var r=At(e,n);if(!r){var _=Et(Ot(e),n);(r=document.createElement("style")).setAttribute("id",_),e.appendChild(r)}r.innerHTML="string"==typeof t?t:It(t)}else i&&console.warn("".concat(o,': no element has been provided calling "addStyle"'))}(t,e,this._prefix,this._namespace,this._throwWarnings)},t.prototype.removeStyle=function(t){!function(t,e,n,o){if(t){var i=At(t,e);i?i.remove():o&&console.warn("".concat(n,': no style to remove calling "removeStyle"'))}else o&&console.warn("".concat(n,': no element has been provided calling "removeStyle"'))}(t,this._prefix,this._namespace,this._throwWarnings)},t}(),ut="kiosk-mode";!function(t){t.KIOSK="kiosk",t.HIDE_SIDEBAR="hide_sidebar",t.HIDE_HEADER="hide_header",t.HIDE_OVERFLOW="hide_overflow",t.HIDE_MENU_BUTTON="hide_menubutton",t.HIDE_ACCOUNT="hide_account",t.HIDE_NOTIFICATIONS="hide_notifications",t.HIDE_SEARCH="hide_search",t.HIDE_ASSISTANT="hide_assistant",t.HIDE_REFRESH="hide_refresh",t.HIDE_UNUSED_ENTITIES="hide_unused_entities",t.HIDE_RELOAD_RESOURCES="hide_reload_resources",t.HIDE_EDIT_DASHBOARD="hide_edit_dashboard",t.HIDE_DIALOG_HEADER_BREADCRUMB_NAVIGATION="hide_dialog_header_breadcrumb_navigation",t.HIDE_DIALOG_HEADER_ACTION_ITEMS="hide_dialog_header_action_items",t.HIDE_DIALOG_HEADER_HISTORY="hide_dialog_header_history",t.HIDE_DIALOG_HEADER_SETTINGS="hide_dialog_header_settings",t.HIDE_DIALOG_HEADER_OVERFLOW="hide_dialog_header_overflow",t.HIDE_DIALOG_HISTORY="hide_dialog_history",t.HIDE_DIALOG_LOGBOOK="hide_dialog_logbook",t.HIDE_DIALOG_ATTRIBUTES="hide_dialog_attributes",t.HIDE_DIALOG_MEDIA_ACTIONS="hide_dialog_media_actions",t.HIDE_DIALOG_UPDATE_ACTIONS="hide_dialog_update_actions",t.HIDE_DIALOG_CAMERA_ACTIONS="hide_dialog_camera_actions",t.HIDE_DIALOG_CLIMATE_ACTIONS="hide_dialog_climate_actions",t.HIDE_DIALOG_CLIMATE_TEMPERATURE_ACTIONS="hide_dialog_climate_temperature_actions",t.HIDE_DIALOG_CLIMATE_SETTINGS_ACTIONS="hide_dialog_climate_settings_actions",t.HIDE_DIALOG_TIMER_ACTIONS="hide_dialog_timer_actions",t.HIDE_DIALOG_LIGHT_ACTIONS="hide_dialog_light_actions",t.HIDE_DIALOG_LIGHT_CONTROL_ACTIONS="hide_dialog_light_control_actions",t.HIDE_DIALOG_LIGHT_COLOR_ACTIONS="hide_dialog_light_color_actions",t.HIDE_DIALOG_LIGHT_SETTINGS_ACTIONS="hide_dialog_light_settings_actions",t.HIDE_DIALOG_HISTORY_SHOW_MORE="hide_dialog_history_show_more",t.HIDE_DIALOG_LOGBOOK_SHOW_MORE="hide_dialog_logbook_show_more",t.BLOCK_OVERFLOW="block_overflow",t.BLOCK_MOUSE="block_mouse",t.BLOCK_CONTEXT_MENU="block_context_menu"}(X||(X={})),function(t){t.IGNORE_ENTITY_SETTINGS="ignore_entity_settings",t.IGNORE_MOBILE_SETTINGS="ignore_mobile_settings",t.IGNORE_DISABLE_KM="ignore_disable_km"}(Z||(Z={})),function(t){t.CACHE="cache",t.CLEAR_CACHE="clear_km_cache",t.DISABLE_KIOSK_MODE="disable_km"}(J||(J={}));var ht,Tt="ui",Dt="".concat(Tt,".common"),Lt="".concat(Tt,".panel"),dt="".concat(Lt,".lovelace"),St="".concat(dt,".menu"),Ht="".concat(Tt,".dialogs.more_info_control");!function(t){t.SEARCH="SEARCH",t.ASSIST="ASSIST",t.REFRESH="REFRESH",t.UNUSED_ENTITIES="UNUSED_ENTITIES",t.RELOAD_RESOURCES="RELOAD_RESOURCES",t.EDIT_DASHBOARD="EDIT_DASHBOARD",t.DIALOG_DISMISS="DIALOG_DISMISS",t.DIALOG_HISTORY="DIALOG_HISTORY",t.DIALOG_SETTINGS="DIALOG_SETTINGS"}(ht||(ht={}));var Rt,Nt=Object.freeze(((Q={})[ht.SEARCH]="".concat(St,".search_entities"),Q[ht.ASSIST]="".concat(St,".assist_tooltip"),Q[ht.REFRESH]="".concat(Dt,".refresh"),Q[ht.UNUSED_ENTITIES]="".concat(dt,".unused_entities.title"),Q[ht.RELOAD_RESOURCES]="".concat(St,".reload_resources"),Q[ht.EDIT_DASHBOARD]="".concat(St,".configure_ui"),Q[ht.DIALOG_HISTORY]="".concat(Ht,".history"),Q[ht.DIALOG_SETTINGS]="".concat(Ht,".settings"),Q[ht.DIALOG_DISMISS]="".concat(Dt,".close"),Q));!function(t){t.HOME_ASSISTANT="home-assistant",t.HA_PANEL_LOVELACE="ha-panel-lovelace",t.HUI_VIEW="hui-view",t.MENU_ITEM="ha-icon-button",t.TOOLTIP="ha-tooltip",t.MENU_ITEM_ICON="mwc-icon-button",t.BUTTON_MENU="ha-button-menu",t.OVERLAY_MENU_ITEM="ha-list-item",t.TOOLBAR=".toolbar",t.ACTION_ITEMS=".action-items",t.HA_MORE_INFO_DIALOG="ha-more-info-dialog",t.HA_DIALOG="ha-dialog",t.HA_DIALOG_HEADER="ha-dialog-header",t.HA_DIALOG_MORE_INFO="ha-more-info-info",t.HA_DIALOG_HISTORY="ha-more-info-history",t.HA_DIALOG_LOGBOOK="ha-more-info-logbook",t.HA_DIALOG_MORE_INFO_CONTENT="more-info-content",t.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK="ha-more-info-history-and-logbook",t.HA_DIALOG_DEFAULT="more-info-default",t.HA_DIALOG_TIMER="more-info-timer",t.HA_DIALOG_VACUUM="more-info-vacuum",t.HA_DIALOG_CAMERA="more-info-camera",t.HA_DIALOG_SIREN="more-info-siren",t.HA_DIALOG_PERSON="more-info-person",t.HA_DIALOG_MEDIA_PLAYER="more-info-media_player",t.HA_DIALOG_LIGHT="more-info-light",t.HA_DIALOG_UPDATE="more-info-update",t.HA_DIALOG_LOCK="more-info-lock",t.HA_DIALOG_CLIMATE="more-info-climate",t.HA_DIALOG_CLIMATE_CONTROL_SELECT="ha-more-info-control-select-container",t.HA_DIALOG_CLIMATE_TEMPERATURE="ha-more-info-climate-temperature",t.HA_STATE_CONTROL_CLIMATE_TEMPERATURE="ha-state-control-climate-temperature",t.HA_DIALOG_CLIMATE_TEMPERATURE_BUTTONS=".buttons",t.HA_DIALOG_CLIMATE_CIRCULAR_SLIDER="ha-control-circular-slider",t.HA_DIALOG_CLIMATE_CIRCULAR_SLIDER_INTERACTION="#interaction",t.HA_DIALOG_CLIMATE_CIRCULAR_SLIDER_INTERACTION_SLIDER='path[role="slider"]',t.HA_DIALOG_CLIMATE_CIRCULAR_SLIDER_INTERACTION_TARGET=".target",t.HA_DIALOG_CLIMATE_CIRCULAR_SLIDER_INTERACTION_TARGET_BORDER=".target-border",t.HA_DIALOG_LIGHT_BRIGHTNESS="ha-state-control-light-brightness",t.HA_DIALOG_LIGHT_CONTROLS="ha-icon-button-group",t.HA_DIALOG_LIGHT_COLORS="ha-more-info-light-favorite-colors",t.HA_DIALOG_LIGHT_SETTINGS="ha-more-info-control-select-container",t.HA_DIALOG_ATTRIBUTES="ha-attributes"}(Rt||(Rt={}));var ft,pt=/^(.*?)( \([A-Z]\))?$/,Gt="true",vt="state_changed",Ct="hass-toggle-menu",mt="MDCDrawer:closed",yt=function(t){var e=t.replace(/(?:^|_)([a-z])/g,(function(t,e){return e.toUpperCase()}));return"km".concat(e)},Mt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new URLSearchParams(window.location.search);return t.some((function(t){return n.has(t)}))},gt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];e.forEach((function(e){return window.localStorage.setItem(yt(e),t)}))},wt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.some((function(t){return window.localStorage.getItem(yt(t))===Gt}))},Ut=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object.fromEntries(t.map((function(t){return[t,!1]})))},bt={HEADER:{"#view":{minHeight:"100vh !important",KioskHeaderHeight:"0px",paddingTop:"calc(var(--kiosk-header-height) + env(safe-area-inset-top)) !important"},".header":!1},ACCOUNT:Ut("ha-md-list-item.user"),NOTIFICATIONS:Ut("ha-md-list-item.notifications"),DIVIDER:Ut(".divider"),SIDEBAR_ITEMS_CONTAINER:function(t,e,n){var o=132,i=132;return n&&e?(o=0,i=0):n?(o-=50,i-=50):e&&(o-=48,i-=48),t&&(o-=56),{":host([expanded]) .title":{marginLeft:t?"19px":"3px"},":host(:not([expanded])) ha-md-list.ha-scrollbar":{height:"calc(100% - var(--header-height) - ".concat(o,"px - env(safe-area-inset-bottom)) !important")},":host([expanded]) ha-md-list.ha-scrollbar":{height:"calc(100% - var(--header-height) - ".concat(i,"px - env(safe-area-inset-bottom)) !important")}}},MENU_BUTTON:Ut(":host(:not([expanded])) .menu",":host([expanded]) .menu ha-icon-button"),MENU_BUTTON_BURGER:Ut("ha-menu-button"),MOUSE:{"body::after":{bottom:0,content:'""',cursor:"none",display:"block",left:0,position:"fixed",right:0,top:0,zIndex:999999}},SIDEBAR:{":host":{MdcDrawerWidth:"0px !important"},"partial-panel-resolver":{MdcTopAppBarWidth:"100% !important"},"ha-drawer > ha-sidebar":!1,".header":{width:"100% !important"}},ASIDE:Ut(".mdc-drawer"),OVERFLOW_MENU:Ut("".concat(Rt.TOOLBAR," > ").concat(Rt.ACTION_ITEMS," > ").concat(Rt.BUTTON_MENU)),BLOCK_OVERFLOW:(ft={},ft["".concat(Rt.TOOLBAR," > ").concat(Rt.ACTION_ITEMS," > ").concat(Rt.BUTTON_MENU)]={"pointer-events":"none !important"},ft),SEARCH:Ut("".concat(Rt.TOOLBAR," > ").concat(Rt.ACTION_ITEMS,' > ha-tooltip[data-selector="').concat(ht.SEARCH,'"]'),"".concat(Rt.TOOLBAR," > ").concat(Rt.ACTION_ITEMS," > ").concat(Rt.BUTTON_MENU," > ").concat(Rt.OVERLAY_MENU_ITEM,'[data-selector="').concat(ht.SEARCH,'"]')),ASSISTANT:Ut("".concat(Rt.TOOLBAR," > ").concat(Rt.ACTION_ITEMS,' > ha-tooltip[data-selector="').concat(ht.ASSIST,'"]'),"".concat(Rt.TOOLBAR," > ").concat(Rt.ACTION_ITEMS," > ").concat(Rt.BUTTON_MENU," > ").concat(Rt.OVERLAY_MENU_ITEM,'[data-selector="').concat(ht.ASSIST,'"]')),REFRESH:Ut("".concat(Rt.TOOLBAR," > ").concat(Rt.ACTION_ITEMS," > ").concat(Rt.BUTTON_MENU," > ").concat(Rt.OVERLAY_MENU_ITEM,'[data-selector="').concat(ht.REFRESH,'"]')),UNUSED_ENTITIES:Ut("".concat(Rt.TOOLBAR," > ").concat(Rt.ACTION_ITEMS," > ").concat(Rt.BUTTON_MENU," > ").concat(Rt.OVERLAY_MENU_ITEM,'[data-selector="').concat(ht.UNUSED_ENTITIES,'"]')),RELOAD_RESOURCES:Ut("".concat(Rt.TOOLBAR," > ").concat(Rt.ACTION_ITEMS," > ").concat(Rt.BUTTON_MENU," > ").concat(Rt.OVERLAY_MENU_ITEM,'[data-selector="').concat(ht.RELOAD_RESOURCES,'"]')),EDIT_DASHBOARD:Ut("".concat(Rt.TOOLBAR," > ").concat(Rt.ACTION_ITEMS,' > ha-tooltip[data-selector="').concat(ht.EDIT_DASHBOARD,'"]'),"".concat(Rt.TOOLBAR," > ").concat(Rt.ACTION_ITEMS," > ").concat(Rt.BUTTON_MENU," > ").concat(Rt.OVERLAY_MENU_ITEM,'[data-selector="').concat(ht.EDIT_DASHBOARD,'"]')),DIALOG_HEADER_BREADCRUMB_NAVIGATION:Ut("".concat(Rt.HA_DIALOG_HEADER," > .title > .breadcrumb")),DIALOG_HEADER_HISTORY:Ut("".concat(Rt.HA_DIALOG_HEADER," > ").concat(Rt.MENU_ITEM,'[data-selector="').concat(ht.DIALOG_HISTORY,'"]')),DIALOG_HEADER_SETTINGS:Ut("".concat(Rt.HA_DIALOG_HEADER," > ").concat(Rt.MENU_ITEM,'[data-selector="').concat(ht.DIALOG_SETTINGS,'"]')),DIALOG_HEADER_OVERFLOW:Ut("".concat(Rt.HA_DIALOG_HEADER," > ").concat(Rt.BUTTON_MENU)),DIALOG_HISTORY:Ut(Rt.HA_DIALOG_HISTORY),DIALOG_LOGBOOK:Ut(Rt.HA_DIALOG_LOGBOOK),DIALOG_ATTRIBUTES:Ut(Rt.HA_DIALOG_ATTRIBUTES),DIALOG_MEDIA_ACTIONS:Ut(".controls"),DIALOG_TIMER_ACTIONS:Ut(".actions"),DIALOG_UPDATE_ACTIONS:Ut(".actions","hr:has(+ .actions)"),DIALOG_CAMERA_ACTIONS:Ut(".actions"),DIALOG_CLIMATE_CONTROL_SELECT:Ut(Rt.HA_DIALOG_CLIMATE_CONTROL_SELECT),DIALOG_CLIMATE_TEMPERATURE_BUTTONS:Ut(Rt.HA_DIALOG_CLIMATE_TEMPERATURE_BUTTONS),DIALOG_CLIMATE_CIRCULAR_SLIDER_INTERACTION:Ut(Rt.HA_DIALOG_CLIMATE_CIRCULAR_SLIDER_INTERACTION,Rt.HA_DIALOG_CLIMATE_CIRCULAR_SLIDER_INTERACTION_SLIDER,Rt.HA_DIALOG_CLIMATE_CIRCULAR_SLIDER_INTERACTION_TARGET_BORDER,Rt.HA_DIALOG_CLIMATE_CIRCULAR_SLIDER_INTERACTION_TARGET),DIALOG_LIGHT_CONTROL_ACTIONS:Ut(".controls > ".concat(Rt.HA_DIALOG_LIGHT_BRIGHTNESS," + ").concat(Rt.HA_DIALOG_LIGHT_CONTROLS)),DIALOG_LIGHT_COLOR_ACTIONS:Ut(".controls > ".concat(Rt.HA_DIALOG_LIGHT_COLORS)),DIALOG_LIGHT_SETTINGS_ACTIONS:Ut(".controls:has(> ".concat(Rt.HA_DIALOG_LIGHT_BRIGHTNESS,") + div > ").concat(Rt.HA_DIALOG_LIGHT_SETTINGS)),DIALOG_SHOW_MORE:Ut(".header a")},Bt=function(){function e(){this.lines=[{content:"%c≡ kiosk-mode",color:"white",background:"#03a9f4"},{content:"%cversion ".concat("7.0.1")}]}return e.prototype.log=function(){var e=[],n=[],o=this.lines.length-1,i={"border-color":"#424242","border-style":"solid",display:"inline-block","font-family":"monospace","font-size":"12px"};this.lines.forEach((function(r,_){e.push(r.content.padEnd(27)),e.push("%c⋮"),_!==o&&e.push("%c\n");var a="0 0 0 1px",s="0 1px 0 1px";0===_?(a="1px 0 0 1px",s="1px 1px 0 0"):_===o&&(a="0 0 1px 1px",s="0 1px 1px 0"),n.push(ct(t(t({},i),{background:r.background||"white",color:r.color||"#424242",padding:0===_?"1px 0px 1px 5px":"1px 0px 1px 10px","border-width":a}))),n.push(ct(t(t({},i),{background:r.background||"white",color:r.color||"white",padding:0===_?"1px 5px":"1px 5px 1px 0px","border-width":s}))),_!==o&&n.push("")})),console.info.apply(console,function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}([e.join("")],n,!1))},e}(),Pt=function(){function t(){var t=this;Mt(J.CLEAR_CACHE)&&Object.values(X).forEach((function(t){window.localStorage.removeItem(yt(t))})),window.kioskModeEntities={},this.options={},this.styleManager=new lt({prefix:"kiosk_mode",throwWarnings:!1});var i=new at;i.addEventListener(U.ON_LOVELACE_PANEL_LOAD,(function(i){return e(t,void 0,void 0,(function(){var t,e,r,_,a,s,c,I,E,O,A,l,u,h,T,D,L=this;return n(this,(function(n){switch(n.label){case 0:return this.HAElements=i.detail,t=this.HAElements,e=t.HOME_ASSISTANT,r=t.HOME_ASSISTANT_MAIN,_=t.HUI_ROOT,a=t.HA_DRAWER,s=t.HEADER,c=t.HA_SIDEBAR,I=this,[4,e.element];case 1:return I.ha=n.sent(),E=this,[4,r.selector.$.element];case 2:return E.main=n.sent(),O=this,[4,_.selector.$.element];case 3:return O.huiRoot=n.sent(),A=this,[4,a.element];case 4:return A.drawerLayout=n.sent(),l=this,[4,s.selector.query(Rt.TOOLBAR).element];case 5:return l.appToolbar=n.sent(),u=this,[4,c.selector.$.element];case 6:return u.sideBarRoot=n.sent(),h=this,[4,o((function(){var t,e;return null===(e=null===(t=L.ha)||void 0===t?void 0:t.hass)||void 0===e?void 0:e.user}),(function(t){return!!t}),{retries:500,delay:50,rejectMessage:"".concat(ut,": Cannot select ").concat(Rt.HOME_ASSISTANT," > hass > user after {{ retries }} attempts. Giving up!")})];case 7:return h.user=n.sent(),this.version=function(t){var e=t?t.match(/^(\d+)\.(\d+)\.(\w+)(?:\.(\w+))?$/):null;return e?[+e[1],+e[2],e[3]]:null}(null===(D=null===(T=this.ha.hass)||void 0===T?void 0:T.config)||void 0===D?void 0:D.version),this.run(),[2]}}))}))})),i.addEventListener(U.ON_MORE_INFO_DIALOG_OPEN,(function(e){t.HAMoreInfoDialogElements=e.detail,t.insertMoreInfoDialogStyles()})),i.addEventListener(U.ON_HISTORY_AND_LOGBOOK_DIALOG_OPEN,(function(e){t.HAMoreInfoDialogElements=e.detail,t.insertMoreInfoDialogStyles()})),i.listen(),this.entityWatch(),this.resizeWindowBinded=this.resizeWindow.bind(this)}return t.prototype.run=function(){return e(this,void 0,void 0,(function(){var t,e=this;return n(this,(function(n){return(t=this.main.querySelector(Rt.HA_PANEL_LOVELACE))?[2,o((function(){var e;return null===(e=null==t?void 0:t.lovelace)||void 0===e?void 0:e.config}),(function(t){return!!t}),{retries:500,delay:50,rejectMessage:"".concat(ut,": Cannot select Lovelace config after {{ retries }} attempts. Giving up!")}).then((function(t){return e.processConfig(t.kiosk_mode||{})}))]:[2]}))}))},t.prototype.runDialogs=function(t){var e,n;void 0===t&&(t=null===(n=null===(e=this.ha)||void 0===e?void 0:e.shadowRoot)||void 0===n?void 0:n.querySelector(Rt.HA_MORE_INFO_DIALOG)),t&&this.insertMoreInfoDialogStyles()},t.prototype.processConfig=function(t){return e(this,void 0,void 0,(function(){var i,r,_,a,s,c=this;return n(this,(function(I){var E;return i=this.ha.hass.panelUrl,window.kioskModeEntities[i]||(window.kioskModeEntities[i]=[]),Object.values(X).forEach((function(t){c.options[t]=!1})),Object.values(Z).forEach((function(t){c.options[t]=!1})),(E=this.ha,e(void 0,void 0,void 0,(function(){var t,e;return n(this,(function(n){switch(n.label){case 0:return t=Object.entries(Nt),[4,o((function(){return t.map((function(t){var e=t[0],n=t[1];return[E.hass.localize(n),e]}))}),(function(t){return!t.find((function(t){return!t[0]}))}),{retries:500,delay:50})];case 1:return e=n.sent(),[2,Object.fromEntries(e)]}}))}))).then((function(t){c.menuTranslations=t,c.updateMenuItemsLabels()})).catch((function(){console.warn("".concat(ut,": ").concat("[ Non critial warning ]"," Cannot get resources translations"))})),wt.apply(void 0,Object.values(X))||Mt.apply(void 0,Object.values(X))?Object.values(X).forEach((function(t){c.options[t]=wt(t)||Mt(t)})):this.setOptions(t,!1),(r=this.user.is_admin?t.admin_settings:t.non_admin_settings)&&this.setOptions(r,!0),t.user_settings&&t.user_settings.forEach((function(t){t.users.some((function(t){return t.toLowerCase()===c.user.name.toLowerCase()}))&&c.setOptions(t,!0)})),(_=this.options[Z.IGNORE_MOBILE_SETTINGS]?null:t.mobile_settings)&&(a=_.custom_width?_.custom_width:812,window.innerWidth<=a&&this.setOptions(_,!0)),(s=this.options[Z.IGNORE_ENTITY_SETTINGS]?null:t.entity_settings)&&s.forEach((function(t){var e=Object.keys(t.entity)[0];window.kioskModeEntities[i].includes(e)||window.kioskModeEntities[i].push(e),c.ha.hass.states[e].state==t.entity[e]&&c.setOptions(t,!1)})),Mt(J.DISABLE_KIOSK_MODE)&&!this.options[Z.IGNORE_DISABLE_KM]||this.insertStyles(),[2]}))}))},t.prototype.insertStyles=function(){var t,e,n,o=this;if(this.options[X.KIOSK]||this.options[X.HIDE_HEADER]?(this.styleManager.addStyle(bt.HEADER,this.huiRoot),Mt(J.CACHE)&&gt(Gt,X.HIDE_HEADER)):this.styleManager.removeStyle(this.huiRoot),null===(e=null===(t=this.main)||void 0===t?void 0:t.host)||void 0===e||e.removeEventListener(Ct,this.blockEventHandler,!0),this.options[X.KIOSK]||this.options[X.HIDE_SIDEBAR]){var i=function(){var t,e;null===(e=null===(t=o.main)||void 0===t?void 0:t.host)||void 0===e||e.addEventListener(Ct,o.blockEventHandler,!0),o.styleManager.addStyle(bt.SIDEBAR,o.drawerLayout),o.styleManager.addStyle(bt.ASIDE,o.drawerLayout.shadowRoot),Mt(J.CACHE)&&gt(Gt,X.HIDE_SIDEBAR),o.drawerLayout.removeEventListener(mt,i)};"modal"===this.drawerLayout.type&&(null===(n=this.drawerLayout.appContent)||void 0===n?void 0:n.inert)?this.drawerLayout.addEventListener(mt,i):i()}else this.styleManager.removeStyle(this.drawerLayout),this.styleManager.removeStyle(this.drawerLayout.shadowRoot);if(this.options[X.HIDE_ACCOUNT]||this.options[X.HIDE_NOTIFICATIONS]||this.options[X.HIDE_MENU_BUTTON]){var r=[this.options[X.HIDE_ACCOUNT]&&bt.ACCOUNT,this.options[X.HIDE_NOTIFICATIONS]&&bt.NOTIFICATIONS,this.options[X.HIDE_ACCOUNT]&&this.options[X.HIDE_NOTIFICATIONS]&&bt.DIVIDER,(this.options[X.HIDE_MENU_BUTTON]||this.options[X.HIDE_NOTIFICATIONS]||this.options[X.HIDE_ACCOUNT])&&bt.SIDEBAR_ITEMS_CONTAINER(this.options[X.HIDE_MENU_BUTTON],this.options[X.HIDE_NOTIFICATIONS],this.options[X.HIDE_ACCOUNT]),this.options[X.HIDE_MENU_BUTTON]&&bt.MENU_BUTTON];this.styleManager.addStyle(r,this.sideBarRoot),Mt(J.CACHE)&&(this.options[X.HIDE_ACCOUNT]&&gt(Gt,X.HIDE_ACCOUNT),this.options[X.HIDE_NOTIFICATIONS]&&gt(Gt,X.HIDE_NOTIFICATIONS))}else this.styleManager.removeStyle(this.sideBarRoot);if(this.options[X.HIDE_SEARCH]||this.options[X.HIDE_ASSISTANT]||this.options[X.HIDE_REFRESH]||this.options[X.HIDE_UNUSED_ENTITIES]||this.options[X.HIDE_RELOAD_RESOURCES]||this.options[X.HIDE_EDIT_DASHBOARD]||this.options[X.HIDE_OVERFLOW]||this.options[X.BLOCK_OVERFLOW]||this.options[X.HIDE_SIDEBAR]||this.options[X.HIDE_MENU_BUTTON]){r=[this.options[X.HIDE_SEARCH]&&bt.SEARCH,this.options[X.HIDE_ASSISTANT]&&bt.ASSISTANT,this.options[X.HIDE_REFRESH]&&bt.REFRESH,this.options[X.HIDE_UNUSED_ENTITIES]&&bt.UNUSED_ENTITIES,this.options[X.HIDE_RELOAD_RESOURCES]&&bt.RELOAD_RESOURCES,this.options[X.HIDE_EDIT_DASHBOARD]&&bt.EDIT_DASHBOARD,this.options[X.HIDE_OVERFLOW]&&bt.OVERFLOW_MENU,this.options[X.BLOCK_OVERFLOW]&&bt.BLOCK_OVERFLOW,(this.options[X.HIDE_MENU_BUTTON]||this.options[X.HIDE_SIDEBAR])&&bt.MENU_BUTTON_BURGER];this.styleManager.addStyle(r,this.appToolbar),Mt(J.CACHE)&&(this.options[X.HIDE_SEARCH]&&gt(Gt,X.HIDE_SEARCH),this.options[X.HIDE_ASSISTANT]&&gt(Gt,X.HIDE_ASSISTANT),this.options[X.HIDE_REFRESH]&&gt(Gt,X.HIDE_REFRESH),this.options[X.HIDE_UNUSED_ENTITIES]&&gt(Gt,X.HIDE_UNUSED_ENTITIES),this.options[X.HIDE_RELOAD_RESOURCES]&&gt(Gt,X.HIDE_RELOAD_RESOURCES),this.options[X.HIDE_EDIT_DASHBOARD]&&gt(Gt,X.HIDE_EDIT_DASHBOARD),this.options[X.HIDE_OVERFLOW]&&gt(Gt,X.HIDE_OVERFLOW),this.options[X.BLOCK_OVERFLOW]&&gt(Gt,X.BLOCK_OVERFLOW),this.options[X.HIDE_MENU_BUTTON]&&gt(Gt,X.HIDE_MENU_BUTTON))}else this.styleManager.removeStyle(this.appToolbar);this.options[X.BLOCK_MOUSE]?(this.styleManager.addStyle(bt.MOUSE,document.body),Mt(J.CACHE)&&gt(Gt,X.BLOCK_MOUSE)):this.styleManager.removeStyle(document.body),window.removeEventListener("contextmenu",this.blockEventHandler,!0),this.options[X.BLOCK_CONTEXT_MENU]&&(window.addEventListener("contextmenu",this.blockEventHandler,!0),Mt(J.CACHE)&&gt(Gt,X.BLOCK_CONTEXT_MENU)),window.removeEventListener("resize",this.resizeWindowBinded),window.addEventListener("resize",this.resizeWindowBinded),window.dispatchEvent(new Event("resize"))},t.prototype.insertMoreInfoDialogStyles=function(){return e(this,void 0,void 0,(function(){var t,e,o,i,r,_,a,s,c=this;return n(this,(function(n){switch(n.label){case 0:return this.HAMoreInfoDialogElements.HA_DIALOG.selector.query("".concat(Rt.HA_DIALOG_HEADER," > ").concat(Rt.MENU_ITEM)).all.then((function(t){!function(t,e){t.forEach((function(t){if(t&&t.dataset&&!t.dataset.selector){var n=t.shadowRoot.querySelector(Rt.MENU_ITEM_ICON);t.dataset.selector=e[n.title]}}))}(t,c.menuTranslations)})),[4,this.HAMoreInfoDialogElements.HA_DIALOG.element];case 1:return t=n.sent(),e=this.HAMoreInfoDialogElements.HA_DIALOG_CONTENT,[4,(o=e.selector.query("".concat(Rt.HA_DIALOG_MORE_INFO,", ").concat(Rt.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK)).$).element];case 2:return i=n.sent(),this.options[X.HIDE_DIALOG_HEADER_BREADCRUMB_NAVIGATION]||this.options[X.HIDE_DIALOG_HEADER_ACTION_ITEMS]||this.options[X.HIDE_DIALOG_HEADER_HISTORY]||this.options[X.HIDE_DIALOG_HEADER_SETTINGS]||this.options[X.HIDE_DIALOG_HEADER_OVERFLOW]?(s=[this.options[X.HIDE_DIALOG_HEADER_BREADCRUMB_NAVIGATION]&&bt.DIALOG_HEADER_BREADCRUMB_NAVIGATION,(this.options[X.HIDE_DIALOG_HEADER_ACTION_ITEMS]||this.options[X.HIDE_DIALOG_HEADER_HISTORY])&&bt.DIALOG_HEADER_HISTORY,(this.options[X.HIDE_DIALOG_HEADER_ACTION_ITEMS]||this.options[X.HIDE_DIALOG_HEADER_SETTINGS])&&bt.DIALOG_HEADER_SETTINGS,(this.options[X.HIDE_DIALOG_HEADER_ACTION_ITEMS]||this.options[X.HIDE_DIALOG_HEADER_OVERFLOW])&&bt.DIALOG_HEADER_OVERFLOW],this.styleManager.addStyle(s,t),Mt(J.CACHE)&&(this.options[X.HIDE_DIALOG_HEADER_BREADCRUMB_NAVIGATION]&&gt(Gt,X.HIDE_DIALOG_HEADER_BREADCRUMB_NAVIGATION),this.options[X.HIDE_DIALOG_HEADER_ACTION_ITEMS]&&gt(Gt,X.HIDE_DIALOG_HEADER_ACTION_ITEMS),this.options[X.HIDE_DIALOG_HEADER_HISTORY]&&gt(Gt,X.HIDE_DIALOG_HEADER_HISTORY),this.options[X.HIDE_DIALOG_HEADER_SETTINGS]&&gt(Gt,X.HIDE_DIALOG_HEADER_SETTINGS),this.options[X.HIDE_DIALOG_HEADER_OVERFLOW]&&gt(Gt,X.HIDE_DIALOG_HEADER_OVERFLOW))):this.styleManager.removeStyle(t),r=o.query(Rt.HA_DIALOG_MORE_INFO_CONTENT).$.query(Rt.HA_DIALOG_CLIMATE).$,_=r.query(Rt.HA_STATE_CONTROL_CLIMATE_TEMPERATURE).$,a=_.query(Rt.HA_DIALOG_CLIMATE_CIRCULAR_SLIDER).$,r.element.then((function(t){c.options[X.HIDE_DIALOG_CLIMATE_ACTIONS]||c.options[X.HIDE_DIALOG_CLIMATE_SETTINGS_ACTIONS]?(c.styleManager.addStyle(bt.DIALOG_CLIMATE_CONTROL_SELECT,t),Mt(J.CACHE)&&(c.options[X.HIDE_DIALOG_CLIMATE_ACTIONS]&&gt(Gt,X.HIDE_DIALOG_CLIMATE_ACTIONS),c.options[X.HIDE_DIALOG_CLIMATE_SETTINGS_ACTIONS]&&gt(Gt,X.HIDE_DIALOG_CLIMATE_SETTINGS_ACTIONS))):c.styleManager.removeStyle(t)})),_.element.then((function(t){c.options[X.HIDE_DIALOG_CLIMATE_ACTIONS]||c.options[X.HIDE_DIALOG_CLIMATE_TEMPERATURE_ACTIONS]?(c.styleManager.addStyle(bt.DIALOG_CLIMATE_TEMPERATURE_BUTTONS,t),Mt(J.CACHE)&&c.options[X.HIDE_DIALOG_CLIMATE_TEMPERATURE_ACTIONS]&&gt(Gt,X.HIDE_DIALOG_CLIMATE_TEMPERATURE_ACTIONS)):c.styleManager.removeStyle(t)})),a.element.then((function(t){c.options[X.HIDE_DIALOG_CLIMATE_ACTIONS]||c.options[X.HIDE_DIALOG_CLIMATE_TEMPERATURE_ACTIONS]?c.styleManager.addStyle(bt.DIALOG_CLIMATE_CIRCULAR_SLIDER_INTERACTION,t):c.styleManager.removeStyle(t)})),o.query(Rt.HA_DIALOG_MORE_INFO_CONTENT).$.query([Rt.HA_DIALOG_DEFAULT,Rt.HA_DIALOG_LIGHT,Rt.HA_DIALOG_LOCK,Rt.HA_DIALOG_MEDIA_PLAYER,Rt.HA_DIALOG_PERSON,Rt.HA_DIALOG_SIREN,Rt.HA_DIALOG_TIMER,Rt.HA_DIALOG_UPDATE,Rt.HA_DIALOG_VACUUM,Rt.HA_DIALOG_CAMERA].join(",")).$.element.then((function(t){if(c.options[X.HIDE_DIALOG_ATTRIBUTES]||c.options[X.HIDE_DIALOG_TIMER_ACTIONS]||c.options[X.HIDE_DIALOG_MEDIA_ACTIONS]||c.options[X.HIDE_DIALOG_UPDATE_ACTIONS]||c.options[X.HIDE_DIALOG_CAMERA_ACTIONS]||c.options[X.HIDE_DIALOG_LIGHT_ACTIONS]||c.options[X.HIDE_DIALOG_LIGHT_CONTROL_ACTIONS]||c.options[X.HIDE_DIALOG_LIGHT_COLOR_ACTIONS]||c.options[X.HIDE_DIALOG_LIGHT_SETTINGS_ACTIONS]){var e=[c.options[X.HIDE_DIALOG_ATTRIBUTES]&&bt.DIALOG_ATTRIBUTES,c.options[X.HIDE_DIALOG_TIMER_ACTIONS]&&t.host.localName===Rt.HA_DIALOG_TIMER&&bt.DIALOG_TIMER_ACTIONS,c.options[X.HIDE_DIALOG_MEDIA_ACTIONS]&&t.host.localName===Rt.HA_DIALOG_MEDIA_PLAYER&&bt.DIALOG_MEDIA_ACTIONS,c.options[X.HIDE_DIALOG_UPDATE_ACTIONS]&&t.host.localName===Rt.HA_DIALOG_UPDATE&&bt.DIALOG_UPDATE_ACTIONS,t.host.localName===Rt.HA_DIALOG_CAMERA&&bt.DIALOG_CAMERA_ACTIONS,(c.options[X.HIDE_DIALOG_LIGHT_ACTIONS]||c.options[X.HIDE_DIALOG_LIGHT_CONTROL_ACTIONS])&&bt.DIALOG_LIGHT_CONTROL_ACTIONS,(c.options[X.HIDE_DIALOG_LIGHT_ACTIONS]||c.options[X.HIDE_DIALOG_LIGHT_COLOR_ACTIONS])&&bt.DIALOG_LIGHT_COLOR_ACTIONS,(c.options[X.HIDE_DIALOG_LIGHT_ACTIONS]||c.options[X.HIDE_DIALOG_LIGHT_SETTINGS_ACTIONS])&&bt.DIALOG_LIGHT_SETTINGS_ACTIONS];c.styleManager.addStyle(e,t),Mt(J.CACHE)&&(c.options[X.HIDE_DIALOG_ATTRIBUTES]&&gt(Gt,X.HIDE_DIALOG_ATTRIBUTES),c.options[X.HIDE_DIALOG_TIMER_ACTIONS]&&gt(Gt,X.HIDE_DIALOG_TIMER_ACTIONS),c.options[X.HIDE_DIALOG_MEDIA_ACTIONS]&&gt(Gt,X.HIDE_DIALOG_MEDIA_ACTIONS),c.options[X.HIDE_DIALOG_UPDATE_ACTIONS]&&gt(Gt,X.HIDE_DIALOG_UPDATE_ACTIONS),c.options[X.HIDE_DIALOG_CAMERA_ACTIONS]&&gt(Gt,X.HIDE_DIALOG_CAMERA_ACTIONS),c.options[X.HIDE_DIALOG_LIGHT_ACTIONS]&&gt(Gt,X.HIDE_DIALOG_LIGHT_ACTIONS),c.options[X.HIDE_DIALOG_LIGHT_CONTROL_ACTIONS]&&gt(Gt,X.HIDE_DIALOG_LIGHT_CONTROL_ACTIONS),c.options[X.HIDE_DIALOG_LIGHT_COLOR_ACTIONS]&&gt(Gt,X.HIDE_DIALOG_LIGHT_COLOR_ACTIONS),c.options[X.HIDE_DIALOG_LIGHT_SETTINGS_ACTIONS]&&gt(Gt,X.HIDE_DIALOG_LIGHT_SETTINGS_ACTIONS))}else c.styleManager.removeStyle(t)})),this.options[X.HIDE_DIALOG_HISTORY]||this.options[X.HIDE_DIALOG_LOGBOOK]?(s=[this.options[X.HIDE_DIALOG_HISTORY]&&bt.DIALOG_HISTORY,this.options[X.HIDE_DIALOG_LOGBOOK]&&bt.DIALOG_LOGBOOK],this.styleManager.addStyle(s,i),Mt(J.CACHE)&&(this.options[X.HIDE_DIALOG_HISTORY]&&gt(Gt,X.HIDE_DIALOG_HISTORY),this.options[X.HIDE_DIALOG_LOGBOOK]&&gt(Gt,X.HIDE_DIALOG_LOGBOOK))):this.styleManager.removeStyle(i),o.query(Rt.HA_DIALOG_HISTORY).$.element.then((function(t){c.options[X.HIDE_DIALOG_HISTORY_SHOW_MORE]?(c.styleManager.addStyle(bt.DIALOG_SHOW_MORE,t),Mt(J.CACHE)&&gt(Gt,X.HIDE_DIALOG_HISTORY_SHOW_MORE)):c.styleManager.removeStyle(t)})),o.query(Rt.HA_DIALOG_LOGBOOK).$.element.then((function(t){c.options[X.HIDE_DIALOG_LOGBOOK_SHOW_MORE]?(c.styleManager.addStyle(bt.DIALOG_SHOW_MORE,t),Mt(J.CACHE)&&gt(Gt,X.HIDE_DIALOG_LOGBOOK_SHOW_MORE)):c.styleManager.removeStyle(t)})),[2]}}))}))},t.prototype.resizeWindow=function(){var t=this;window.clearTimeout(this.resizeDelay),this.resizeDelay=window.setTimeout((function(){t.updateMenuItemsLabels()}),250)},t.prototype.updateMenuItemsLabels=function(){var t=this;this.menuTranslations&&(this.HAElements.HEADER.selector.query("".concat(Rt.TOOLBAR," > ").concat(Rt.ACTION_ITEMS," > ").concat(Rt.TOOLTIP)).all.then((function(e){!function(t,e){t.forEach((function(t){if(t&&t.dataset&&!t.dataset.selector){var n=t.content.replace(pt,"$1").trim();t.dataset.selector=e[n]}}))}(e,t.menuTranslations)})),this.user.is_admin&&this.HAElements.HEADER.selector.query("".concat(Rt.TOOLBAR," ").concat(Rt.OVERLAY_MENU_ITEM)).all.then((function(e){e.forEach((function(e){if(e&&e.dataset&&!e.dataset.selector){var n=e.textContent.trim();e.dataset.selector=t.menuTranslations[n]}}))})))},t.prototype.entityWatch=function(){return e(this,void 0,void 0,(function(){var t=this;return n(this,(function(e){switch(e.label){case 0:return[4,window.hassConnection];case 1:return e.sent().conn.subscribeMessage((function(e){return t.entityWatchCallback(e)}),{type:"subscribe_events",event_type:vt}),[2]}}))}))},t.prototype.entityWatchCallback=function(t){return e(this,void 0,void 0,(function(){var e,o,i;return n(this,(function(n){switch(n.label){case 0:return!(e=window.kioskModeEntities[null===(i=null===(o=this.ha)||void 0===o?void 0:o.hass)||void 0===i?void 0:i.panelUrl]||[]).length||t.event_type!==vt||!e.includes(t.data.entity_id)||t.data.old_state&&t.data.new_state.state===t.data.old_state.state?[3,2]:[4,this.run()];case 1:n.sent(),this.runDialogs(),n.label=2;case 2:return[2]}}))}))},t.prototype.blockEventHandler=function(t){t.preventDefault(),t.stopImmediatePropagation()},t.prototype.setOptions=function(t,e){var n=this;Object.values(X).forEach((function(e){e in t&&(n.options[e]=t[e])})),e&&Object.values(Z).forEach((function(e){e in t&&(n.options[e]=t[e])}))},t}();(new Bt).log(),Promise.resolve(customElements.whenDefined(Rt.HUI_VIEW)).then((function(){window.KioskMode=new Pt}))}();
